<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<META name="description" lang="ru" content="Клуб Двоечников - Из двоечника в отличника! TwoClub.ru -  это своеобразная социальная сеть, где ученики различных учебных заведений: школы, вузы, техникумы, задают вопросы связанные с учебой, и отвечают на них.">
<META name="keywords" lang="ru" content="Клуб Двоечников, ответы, ГДЗ, Решебник, найдите, ЕГЭ, ГИА, главная">
<title>Все Вопросы | Клуб Двоечников</title>
<link rel="stylesheet" type="text/css" href="styles.css"/>
<?php
$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4))){
require_once 'header.php'; }else{
	require_once 'header1.php';}
?>
<style>
#aa{
	text-decoration:none;
	color:#FFF;
}
button{
	background:#B8B8B8; 
	margin-left:2%;
border-radius:5px;
}
a{text-decoration:none;
color:#5E5E5E;
font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
}
</style>
</head>
<body>
<div style="font-family:'Trebuchet MS', Arial, Helvetica, sans-serif;">
<div style="background:#999;">
  <h2 align="center" style="color:#FFF;">Все Статьи </h2>
</div>
<div align="center">
<form action="glav.php" method="post">
<button value="Математика" name="predmet" onclick="javascript: document.forms[...].submit()">Математика</button>
<button value="Русский язык" name="predmet" onclick="javascript: document.forms[...].submit()">Русский язык</button>
<button value="Литература" name="predmet" onclick="javascript: document.forms[...].submit()">Литература</button>
<button value="География" name="predmet" onclick="javascript: document.forms[...].submit()">География</button>
<button value="Биология" name="predmet" onclick="javascript: document.forms[...].submit()">Биология</button>
<button value="Информатика" name="predmet" onclick="javascript: document.forms[...].submit()">Информатика</button>
<button value="Физика" name="predmet" onclick="javascript: document.forms[...].submit()">Физика</button>
<button value="Ан яз" name="predmet" onclick="javascript: document.forms[...].submit()">Английский язык</button>
<button value="Другое" name="predmet" onclick="javascript: document.forms[...].submit()">Другое</button>
<input type="range" min="5" max="10" name="diapazon"  />
</form>
<hr/>
</div>
</div>
<div align="center">
<?php 
$date_time_array = getdate( time() );
$lo=array();
$lol=array();
  $rappopor=array();
  $rappopo=array();
  $rappoport=array();
$rappop=array();
require_once 'login.php';
  $conn = new mysqli($host, $user, $pass, $data);
if(isset($_POST['predmet'])){
$predmet=$_POST['predmet'];
 $query  = "SELECT * FROM stat WHERE pzkk='$predmet'";
  $result = $conn->query($query);
  if (!$result) die ("Ошибка системы");

  $rows = $result->num_rows;
  for ($j = 0 ; $j < $rows ; ++$j)
  {
    $result->data_seek($j);
    $row = $result->fetch_array(MYSQLI_NUM);
	if($date_time_array['year']==$row[12]){
	if($date_time_array['mon']==$row[11]){
	$dt=$row[3];
	$xq=$date_time_array['wday'];
if($dt==$xq){
	$rappopor[]="<a href='".$row[1].".php'>".$row[8]." | ".$row[7]." | ".$row[3]."</a></br>";
}else{
$lo[]="<a href='".$row[1].".php'>".$row[8]." | ".$row[7]." | ".$row[3]."</a></br>";
}
	}
	}
if($j==20)break;
  }
	}else{
	$query  = "SELECT * FROM topics ";
  $result = $conn->query($query);
  if (!$result) die ("Ошибка системы");

  $rows = $result->num_rows;
  for ($j = 0 ; $j < $rows ; ++$j)
  {
    $result->data_seek($j);
    $row = $result->fetch_array(MYSQLI_NUM);
	if($date_time_array['year']==$row[12]){
	if($date_time_array['mon']==$row[11]){
	$dt=$row[3];
	$xq=$date_time_array['mday'];
if($dt==$xq){
	$rappoport[]="<a href='".$row[1].".php'>".$row[8]." | ".$row[7]." | ".$row[3]."</a><br/>";
	}else{
$lol[]="<a href='".$row[1].".php'>".$row[8]." | ".$row[7]." | ".$row[3]."</a></br>";
}
	}
	}
if($j==20)break;
  }
	}
?>
<div>
<h2>За сегодня:</h2>
<?  
foreach($rappopor as $item){
echo"$py: $item</br>";
++$py;
}
 foreach($rappoport as $item){
echo"$po: $item</br>";
++$po;
}
?>
<h2>За месяц:</h2>
<?  
foreach($lo as $item){
echo"$pr: $item</br>";
++$pr;
}
 foreach($lol as $item){
echo"$pl: $item</br>";
++$pl;
}
?>
<hr/>
<h2>За все время:</h2>
<?php
function yandex_link_bar($page, $count, $pages_count, $show_link)
{
// $show_link - это количество отображаемых ссылок;
// нагляднее будет, когда это число будет парное
// Если страница всего одна, то вообще ничего не выводим
if ($pages_count == 1) return false;
$sperator = ' '; // Разделитель ссылок; например, вставить "|" между ссылками
// Для придания ссылкам стиля
$style = 'style="color: #808000; text-decoration: none;"';
$begin = $page - intval($show_link / 2);
unset($show_dots); // На всякий случай :)
// Сам постраничный вывод
// Если количество отображ. ссылок больше кол. страниц
if ($pages_count <= $show_link + 1) $show_dots = 'no';
// Вывод ссылки на первую страницу
if (($begin > 2) && ($pages_count - $show_link > 2)) {
echo '<a '.$style.' href='.$_SERVER['php_self'].'?page=1> |< </a> ';
}
for ($j = 0; $j <= $show_link; $j++) // Основный цикл вывода ссылок
{
$i = $begin + $j; // Номер ссылки
// Если страница рядом с началом, то увеличить цикл для того,
// чтобы количество ссылок было постоянным
if ($i < 1) continue;
// Подобное находится в верхнем цикле
if (!isset($show_dots) && $begin > 1) {
echo ' <a '.$style.' href='.$_SERVER['php_self'].'?page='.($i-1).'><b>...</b></a> ';
$show_dots = "no";
}
// Номер ссылки перевалил за возможное количество страниц
if ($i > $pages_count) break;
if ($i == $page) {
echo ' <a '.$style.' ><b>'.$i.'</b></a> ';
} else {
echo ' <a '.$style.' href='.$_SERVER['php_self'].'?page='.$i.'>'.$i.'</a> ';
}
// Если номер ссылки не равен кол. страниц и это не последняя ссылка
if (($i != $pages_count) && ($j != $show_link)) echo $sperator;
// Вывод "..." в конце
if (($j == $show_link) && ($i < $pages_count)) {
echo ' <a '.$style.' href='.$_SERVER['php_self'].'?page='.($i+1).'><b>...</b></a> ';
}
}
// Вывод ссылки на последнюю страницу
if ($begin + $show_link + 1 < $pages_count) {
echo ' <a '.$style.' href='.$_SERVER['php_self'].'?page='.$pages_count.'> >| </a>';
}
return true;
} // Конец функции

// Подключение к базе данных
mysql_connect('localhost', 'u0064_twocl', '4480338955385') or die('error! Нет соединения с сервером mysql!');
mysql_select_db('u0064007_fast') or die('error! Нет соединения с базой данных!');

// Подготовка к постраничному выводу
$perpage = 10; // Количество отображаемых данных из БД
if (empty($_GET['page']) || ($_GET['page'] <= 0)) {
$page = 1;
} else {
$page = (int) $_GET['page']; // Считывание текущей страницы
}
// Общее количество информации
$count = mysql_numrows(mysql_query('select * from stat')) or die('error! Записей не найдено!');
$pages_count = ceil($count / $perpage); // Количество страниц
// Если номер страницы оказался больше количества страниц
if ($page > $pages_count) $page = $pages_count;
$start_pos = ($page - 1) * $perpage; // Начальная позиция, для запроса к БД
// Вызов функции, для вывода ссылок на экран

yandex_link_bar($page, $count, $pages_count, 10);

// Вывод информации из базы данных
echo '<p><b>Статья | Описание | Число</b></p>';
if(isset($_POST['predmet'])){
$result = mysql_query("select * from stat where pzkk='$predmet' limit ".$start_pos.", ".$perpage) or die('error!');	
}
$result = mysql_query('select * from stat limit '.$start_pos.', '.$perpage) or die('error!');
while ($row = mysql_fetch_array($result)) {
echo "<a href='".$row[1].".php'>".$row[8]." | ".$row[7]." | ".$row[3]."</a><br/>";
}
?>
<div align="center" class="as1">
<h1>Добавить вопрос</h1>
<form action="stat.php" method="post" ENCTYPE="multipart/form-data">
<table width="48%" height="405" style=" border-collapse: collapse;" cellpadding="0.1">
 <tr>
    <td width="22%">Предмет</td>
    <td width="78%"><select name="ppz">
<option value="Математика">Математика</option>
<option value="Русский язык">Рус яз</option>
<option value="Литература">Лит ра</option>
<option value="География">География</option>
<option value="Биология">Биология</option>
<option value="Информатика">Информатика</option>
<option value="Физика">Физика</option>
<option value="Англ яз">Ан яз</option>
<option value="Другое">Другое</option>
</select>
</td>
  </tr>
   <tr>
    <td width="22%">Выберите класс</td>
    <td width="78%">
    <select name="gdz">
    <option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="Другое">Другое</option>
</select>
</td>
  </tr>
  <tr>
    <td>Заголовок</td>
    <td><input type="text" name="title" />
</td>
  </tr>
  <tr>
    <td height="188">Текст</td>
    <td><textarea name="tp" rows="10" cols="50"> </textarea>
</td>
  </tr>
  <tr>
    <td>Приложить изображение?</td>
    <td><input type="checkbox" name="rd" value=1 />
</td>
  </tr>
  <tr>
    <td>Файл</td>
    <td><input type="file" />
</td>
  </tr>
  <tr>
    <td><input type="submit" value="Отправить" class="button" /></td>
  </tr>
</table>
</form>
</div>
<?
if(isset($_SESSION['usertwcl'])){
  $kyky=$_SESSION['usertwcl'];
$query  = "SELECT * FROM users WHERE user='$kyky'";
  $result = $conn->query($query);
  if (!$result) die ("Ошибка базы данных.");

  $rows = $result->num_rows;
  
  for ($j = 0 ; $j < $rows ; ++$j)
  {
    $result->data_seek($j);
    $row = $result->fetch_array(MYSQLI_NUM);
$around=$row[5];
  }
$pzk=0;
if($around<1){
$pzk=1;
echo'<br/><h2>На вашем счету не достаточно баллов, ответьте на чей - нибудь вопрос.</h2><br/>';
}else{
$assd=--$around;
$query ="UPDATE users SET balls='$assd' WHERE user='$kyky'";
  $result = $conn->query($query);
}
 function get_post($conn, $var)
  {
    return $conn->real_escape_string($_POST[$var]);
  }
if(isset($_POST['tp']) and isset($_SESSION['usertwcl']) and isset($_POST['title']) and $around>0){
	$titler=get_post($conn, 'title');
	$txt=get_post($conn, 'tp');
	$username=$_SESSION['usertwcl'];
	$warr=rand(100, 9000);
	$warriable=$warr;
	touch( "".$warriable.".php" );
	$fp = fopen( "".$warriable.".php", "w" );
	fputs( $fp, '<? session_start(); $id="'.$warriable.'";  require_once("obrazeiz.php")?>' );
	fclose( $fp );
$date_time_array = getdate( time() );
$dt=$date_time_array['mday'];
$dt1=$date_time_array['mon'];
$dt2=$date_time_array['year'];
$pzkk=$_POST['ppz'];
$desc=substr($txt,-20);
$titles=get_post($conn, 'title');
$tupe='open';
$gdz=$_POST['gdz'];
	   $query  = "INSERT INTO stat VALUES('$username', '$warriable', '$txt', '$dt', '$uploadfile', '$uploadfile2', '$pzkk', '$desc', '$titles', '$gdz', '$dt1', '$dt2')";
  $result = $conn->query($query);
  }
	     if($_POST['rd']==1){
$uploaddir = 'images/';

// это папка, в которую будет загружаться картинка
$apend=date('YmdHis').rand(100,1000).'.jpg'; 
// это имя, которое будет присвоенно изображению 
$uploadfile = "$uploaddir$apend"; 
//в переменную $uploadfile будет входить папка и имя изображения

// В данной строке самое важное - проверяем загружается ли изображение (а может вредоносный код?)
// И проходит ли изображение по весу. В нашем случае до 512 Кб
if(($_FILES['userfile']['type'] == 'image/gif' || $_FILES['userfile']['type'] == 'image/jpeg' || $_FILES['userfile']['type'] == 'image/png') && ($_FILES['userfile']['size'] != 0 and $_FILES['userfile']['size']<=512000)) 
{ 
// Указываем максимальный вес загружаемого файла. Сейчас до 512 Кб 
  if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) 
   { 
   //Здесь идет процесс загрузки изображения 
   $size = getimagesize($uploadfile); 
   // с помощью этой функции мы можем получить размер пикселей изображения 
     if ($size[0] < 501 && $size[1]<1501) 
     { 
     // если размер изображения не более 500 пикселей по ширине и не более 1500 по  высоте 
     } else {
     echo "Загружаемое изображение превышает допустимые нормы (ширина не более - 500; высота не более 1500)"; 
     unlink($uploadfile); 
     // удаление файла 
     } 
   } else {
   echo "Файл не загружен, вернитеcь и попробуйте еще раз";
   } 
} else { 
echo "Размер файла не должен превышать 512Кб";
} 

  $uploaddir = 'images/';
// это папка, в которую будет загружаться картинка
$apend=date('YmdHis').rand(100,1000).'.jpg'; 
// это имя, которое будет присвоенно изображению 
$uploadfile2 = "$uploaddir$apend"; 
//в переменную $uploadfile будет входить папка и имя изображения

// В данной строке самое важное - проверяем загружается ли изображение (а может вредоносный код?)
// И проходит ли изображение по весу. В нашем случае до 512 Кб
if(($_FILES['userfile1']['type'] == 'image/gif' || $_FILES['userfile1']['type'] == 'image/jpeg' || $_FILES['userfile1']['type'] == 'image/png') && ($_FILES['userfile1']['size'] != 0 and $_FILES['userfile1']['size']<=512000)) 
{ 
// Указываем максимальный вес загружаемого файла. Сейчас до 512 Кб 
  if (move_uploaded_file($_FILES['userfile1']['tmp_name'], $uploadfile2)) 
   { 
   //Здесь идет процесс загрузки изображения 
   $size = getimagesize($uploadfile2); 
   // с помощью этой функции мы можем получить размер пикселей изображения 
     if ($size[0] < 501 && $size[1]<1501) 
     { 
     // если размер изображения не более 500 пикселей по ширине и не более 1500 по  высоте 
     } else {
     echo "Загружаемое изображение превышает допустимые нормы (ширина не более - 500; высота не более 1500)"; 
     unlink($uploadfile2); 
     // удаление файла 
     } 
   } else {
   echo "Файл не загружен, вернитеcь и попробуйте еще раз";
   } 
} else { 
echo "Размер файла не должен превышать 512Кб";
} 
  }else{
	echo"Вы заполнили не все поля";  
  }
}else{
echo'Вам нужно войти или зарегистрироваться, чтобы написать статью';
}
?>
<br/>
</div>
</div>
<? require_once 'downer.html'?>
</body>
</html>